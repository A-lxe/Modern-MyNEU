var style=document.createElement("link");style.rel="stylesheet";style.type="text/css";style.id="customcss";style.href=chrome.extension.getURL("themes/modern/custom.css");chrome.storage.sync.get({enabled:"true"},function(a){if(a.enabled=="false"){$("link[href*='custom.css']").remove();style.href=chrome.extension.getURL("css/default.css");(document.head||document.documentElement).appendChild(style)}else{(document.head||document.documentElement).appendChild(style);checkScript()}});function checkScript(){modernTheme()}function modernTheme(){$("img").each(function(){var e=$(this).attr("src");if(e.indexOf("transparent")!=-1){$(this).remove()}});$("#tabs_tda").each(function(){var e=$(this).html().replace(/<tbody>/g,"<div>");var f=e.replace(/<\/tbody>/g,"</div>").replace(/<tr>/g,"<ul>").replace(/<\/tr>/g,"</ul>").replace(/<td>/g,"<li>").replace(/<\/td>/g,"</li>").replace(/<tr/g,"<ul").replace(/<td/g,"<li");$(this).html('<div class="nav">'+f+'</div><div class="credits">Made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://github.com/Abbondanzo/Modern-MyNEU">Peter Abbondanzo</a></div>')});$(".bg1").closest("table").html('<div class="mylogo"><img src="'+chrome.extension.getURL("img/logo.png")+'"></div>');$("#welcome").closest("table").each(function(){var e=$(this).html().replace(/<tbody>/g,"<div>").replace(/Welcome/g,"Signed in as").replace(/You are currently logged in./g,"").replace(/&nbsp;/g,"");var f=e.replace(/<\/tbody>/g,"</div>").replace(/<br>/g,"").replace(/<tr>/g,"<ul>").replace(/<\/tr>/g,"</ul>").replace(/<td>/g,"<li>").replace(/<\/td>/g,"</li>").replace(/<tr/g,"<ul").replace(/<td/g,"<li");$(this).html('<div class="heading">'+f+"</div>");$(this).css("height",84+"px")});$(".uportal-label").each(function(){if($(this).html().indexOf("logout")!=-1){$(this).addClass("logout")}else{$(this).addClass("secondary")}});$("#welcome").parent().addClass("user");$(".uportal-label").each(function(){var e=$(this).html();switch(e){case"mail":$(this).html('<i class="fa fa-envelope" aria-hidden="true"></i> '+e);break;case"my profile":$(this).html('<i class="fa fa-cog" aria-hidden="true"></i> '+e);break;case"NUPay":$(this).html('<i class="fa fa-shopping-basket" aria-hidden="true"></i> '+e);break;case"help":$(this).html('<i class="fa fa-question-circle" aria-hidden="true"></i> '+e);$(this).closest("ul").append('<li class="search"><input type="type" id="searchQuery" placeholder="Search"></input></li>');break;case"logout":$(this).html(e+' <i class="fa fa-sign-out" aria-hidden="true"></i>');break;default:break}});$(".nav div ul li").each(function(){var e=$(this).children().children().html();if(e.indexOf("myNEU Central")!=-1){$(this).children().children().html('<i class="fa fa-home" aria-hidden="true"></i> '+e)}else{if(e.indexOf("Self-Service")!=-1){$(this).children().children().html('<i class="fa fa-navicon" aria-hidden="true"></i> '+e)}else{if(e.indexOf("Community")!=-1){$(this).children().children().html('<i class="fa fa-users" aria-hidden="true"></i> '+e)}else{if(e.indexOf("Experiential Learning/Co-op")!=-1){$(this).children().children().html('<i class="fa fa-graduation-cap" aria-hidden="true"></i> '+e)}else{if(e.indexOf("Career Development")!=-1){$(this).children().children().html('<i class="fa fa-briefcase" aria-hidden="true"></i> '+e)}else{if(e.indexOf("InfoChannels")!=-1){$(this).children().children().html('<i class="fa fa-info-circle" aria-hidden="true"></i> '+e)}}}}}}});$(".border img").each(function(){var g=$(this).attr("title");var f=$(this).attr("src");var e='<i title="Adjust the position of this widget on screen" class="packery-arrow fa fa-arrows" aria-hidden="true"></i>';if(g!=null){if(g.indexOf("Expand")!=-1){$(this).parent().parent().append(e);$(this).parent().html('<i title="'+g+'" class="fa fa-expand" aria-hidden="true"></i>')}else{if(g.indexOf("Maximize")!=-1){$(this).parent().html('<i title="'+g+'" class="fa fa-caret-square-o-right" aria-hidden="true"></i>')}else{if(g.indexOf("Minimize")!=-1){$(this).parent().html('<i title="'+g+'" class="fa fa-caret-square-o-down" aria-hidden="true"></i>')}}}}else{if(f.indexOf("chan_remove_na")!=-1){$(this).css("display","none")}}});var c=1;$(".uportal-background-content").children("tbody").children("tr").children("td").each(function(f){$(this).children().each(function(g){$(this).attr("data-position",c);c++});var e=$(this).html();$(this).parent().after(e)});$("tr.uportal-background-content").html("");var a=$("table.uportal-background-content").children("tbody").html();$("table.uportal-background-content").html("<div class='packery-holder'>"+a+"</div>");$(".uportal-background-content").each(function(){$(this).css("table-layout","fixed")});$(".packery-holder").children().each(function(){if($(this).is("img")){$(this).remove()}});$(".uportal-background-content").children().children("table").each(function(){$(this).addClass("packery")});$(".uportal-background-content").children('[valign="top"]').each(function(){$(this).addClass("widgets");if($(this).index==1){$(this).css("padding-right","10px")}});$(document).ready(function(g){var e=g(".packery-holder").packery({itemSelector:".packery",columnWidth:460,percentPosition:true,gutter:20});e.find(".packery").each(function(j,h){var k=new Draggabilly(h);e.packery("bindDraggabillyEvents",k)});function f(){var h=e.packery("getItemElements");g(h).each(function(j,k){g(k).attr("data-position",(j+1))})}e.on("layoutComplete",f);e.on("dragItemPositioned",f)});$("#searchQuery").on("keypress change keydown paste input",function(){var e=$(this).val().toLowerCase();$(".uportal-background-content td table").each(function(){var f=$(this).html().toLowerCase().replace(/<.*?>/g,"");if(f.indexOf(e)!=-1){$(this).css("display","table")}else{$(this).css("display","none")}})});function d(){var g=$(".nav").offset().top;var e=$(".nav").height();var f=$(".credits").offset().top;if(g+e+40>=f){$(".credits").css("opacity",0)}else{$(".credits").css("opacity",0.2)}}var b;$(window).on("resize",function(){clearTimeout(b);b=setTimeout(function(){d()},50)});$(document).ready(function(e){setTimeout(function(){d()},50)})};